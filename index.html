<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Newton's Divided Differences Method</title>
  </head>
  <body>
    <h1>Newton's Divided Differences Method</h1>
    
    <p>Enter the value of x to solve P(x):</p>
    <input type="number" id="xValue" value="16" step="any">
    
    <p>Enter the number of points:</p>
    <input type="number" id="pointsCount" value="20" min="2" step="1">
    
    <button onclick="generateFields()">Generate Fields</button>
    <button onclick="calculateAndDisplay()">Calculate and Display</button>
    
    <div id="pointsContainer"></div>
    
    <p id="result"></p>
    
    <p id="polynomial"></p>
    
    
    <script>
      // Pre-defined values for x and y
      let xValues = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20];
      let yValues = [5, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55, 60, 65, 70, 75, 80, 85, 90, 95, 100];
      
      function generateFields() {
        // Clear the pointsContainer
        let pointsContainer = document.getElementById("pointsContainer");
        pointsContainer.innerHTML = "";
      
        // Get the number of points from the input field
        let pointsCount = parseInt(document.getElementById("pointsCount").value.trim());
      
        // Create input fields for each point
        for (let i = 1; i <= pointsCount; i++) {
          let pointDiv = document.createElement("div");
          pointDiv.innerHTML = `
            Point ${i}: x = <input type="number" id="x${i}" step="any" value="${xValues[i-1]}">
            y = <input type="number" id="y${i}" step="any" value="${yValues[i-1]}">
          `;
          pointsContainer.appendChild(pointDiv);
        }
      }
      
      function calculate() {
        // Get the data points from the input fields
        let pointsCount = parseInt(document.getElementById("pointsCount").value.trim());
        let xArr = [], yArr = [];
        for (let i = 1; i <= pointsCount; i++) {
          let x = parseFloat(document.getElementById("x" + i).value.trim());
          let y = parseFloat(document.getElementById("y" + i).value.trim());
          xArr.push(x);
          yArr.push(y);
        }
      
        // Get the value of x to solve P(x)
        let xValue = parseFloat(document.getElementById("xValue").value.trim());
      
        // Calculate the divided differences
        let p = fArr[n-1];
    for (let i = n-2; i >= 0; i--) {
      p = fArr[i] + (xValue - xArr[i]) * p;
    }
  
    // Display the result
    document.getElementById("result").innerHTML = "P(" + xValue + ") = " + p;
    displayPolynomial(xArr, fArr);
  }
  
  function displayPolynomial(xArr, fArr) {
    let polyStr = "P(x) = ";
    let n = xArr.length;
    for (let i = 0; i < n; i++) {
      let term = "";
      if (i > 0) {
        term += "(x - " + xArr[i-1] + ")";
      }
      if (i < n-1) {
        term += " * ";
      }
      polyStr += fArr[i].toFixed(2) + term;
    }
    document.getElementById("polynomial").innerHTML = polyStr;
  }

  function calculateAndDisplay() {
  calculate();
  displayPolynomial(xArr, fArr);
}

  </script>
  
